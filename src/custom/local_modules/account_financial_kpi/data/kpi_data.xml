<odoo>
    <data noupdate="1">
        <!-- Tags for Example -->
        <record id="tag_kpi_current_assets" model="account.account.tag">
            <field name="name">KPI: Activo Corriente</field>
            <field name="applicability">accounts</field>
            <field name="color">1</field>
        </record>
        <record id="tag_kpi_current_liabilities" model="account.account.tag">
            <field name="name">KPI: Pasivo Corriente</field>
            <field name="applicability">accounts</field>
            <field name="color">2</field>
        </record>

        <!-- KPI: Liquidity -->
        <record id="kpi_liquidity" model="account.financial.kpi">
            <field name="name">Liquidez Corriente</field>
            <field name="description">Calculate: Activo Corriente / Pasivo Corriente</field>
            <field name="formula">
if pasivo_corriente:
    result = activo_corriente / pasivo_corriente
else:
    result = 0.0
result
            </field>
            <field name="threshold_warning">1.5</field>
            <field name="threshold_critical">1.0</field>
            <field name="variable_ids" eval="[
                (0, 0, {
                    'name': 'activo_corriente',
                    'account_tag_ids': [(4, ref('account_financial_kpi.tag_kpi_current_assets'))]
                }),
                (0, 0, {
                    'name': 'pasivo_corriente',
                    'account_tag_ids': [(4, ref('account_financial_kpi.tag_kpi_current_liabilities'))]
                })
            ]"/>
        </record>

        <record id="kpi_gross_margin" model="account.financial.kpi">
            <field name="name">Margen Bruto</field>
            <field name="description">(Ingresos - Costos) / Ingresos</field>
            <field name="formula">
# Ejemplo: (Ingresos(4) - Gastos(5)) / Ingresos(4)
revenue = abs(bal('4'))
cogs = bal('5')
if revenue != 0:
    result = (revenue - cogs) / revenue * 100
else:
    result = 0.0
result
            </field>
            <field name="threshold_warning">30.0</field>
            <field name="threshold_critical">20.0</field>
        </record>

        <record id="kpi_ar_turnover" model="account.financial.kpi">
            <field name="name">Rotacion de Cuentas por Cobrar</field>
            <field name="description">Ventas a credito / Cuentas por Cobrar</field>
            <field name="formula">
# Ejemplo: Ventas (4) / Cuentas por Cobrar
# Ajustar codigo segun plan de cuentas
receivables = bal('1') # Asumiendo activo total como proxy si no hay codigo especifico, o usar 13/101
sales = abs(bal('4'))
if receivables != 0:
    result = sales / receivables
else:
    result = 0.0
result
            </field>
            <field name="threshold_warning">5.0</field>
            <field name="threshold_critical">2.0</field>
        </record>
    </data>
</odoo>